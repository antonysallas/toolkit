{# roles/build_report_container/templates/base.j2 #}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Network Switch Firmware Patching Reports{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{% if date_stamp %}../{% endif %}css/main.css">
  {% block extra_css %}{% endblock %}
</head>

<body>
  <!-- Navigation Header -->
  <nav class="top-nav">
    <div class="container-fluid">
      <div class="row align-items-center">
        <div class="col">
          {% if date_stamp %}
          <div class="breadcrumb-wrapper">
            <button class="back-button" onclick="window.history.back()">
              <i class="fas fa-arrow-left"></i>
            </button>
            <span class="text-secondary">
              {% block breadcrumb %}
              Home
              {% endblock %}
            </span>
          </div>
          {% endif %}
        </div>
        <div class="col-auto">
          <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-moon"></i>
            Toggle Theme
          </button>
        </div>
      </div>
    </div>
  </nav>
  <!-- Add content block -->
  {% block content %}{% endblock %}

  <!-- Loading Spinner -->
  <div id="loading" class="position-fixed top-0 start-0 w-100 h-100 d-none">
    <div class="d-flex justify-content-center align-items-center h-100 bg-white bg-opacity-75">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_js %}{% endblock %}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Theme handling with persistence
      const themeToggle = document.getElementById('themeToggle');
      const icon = themeToggle.querySelector('i');

      // Load saved theme
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.body.classList.toggle('dark-theme', savedTheme === 'dark');
      updateThemeIcon(savedTheme === 'dark');

      // Theme toggle handler
      themeToggle.addEventListener('click', function () {
        const isDark = document.body.classList.toggle('dark-theme');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        updateThemeIcon(isDark);
      });

      function updateThemeIcon(isDark) {
        icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
      }

      // Loading state
      window.addEventListener('beforeunload', function () {
        document.getElementById('loading').classList.remove('d-none');
      });
    });
  </script>
</body>

</html>