{# roles/build_report_container/templates/index.j2 #}
<!DOCTYPE html>
<html>
<head>
    <title>Network Switch Firmware Patching Reports</title>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    {% include 'header.j2' %}
    <section>
        <center>
            <h1>Switch Firmware Patching Reports</h1>
        </center>

        <div class="reports-list">
            {% set report_files = found_reports.files | default([]) %}
            {% if report_files %}
                {% for report in report_files | sort(attribute='path', reverse=true)%}
                    {% set path_parts = report.path.split('/') %}
                    {% set date_folder = path_parts[-2] %}
                    {% set report_name = path_parts[-1] %}

                    <h2>Date: {{ date_folder }} </h2>
                    <ul>
                        <li>
                            <a href="{{ date_folder }}/{{ report_name }}">
                                {% if 'pre-patching' in report_name %}Pre-Patching Report{% else %}Post-Patching Report{% endif %}
                                ({{ report_name.split('_')[0] }})
                            </a>
                        </li>
                    </ul>
                {% endfor %}
            {% else %}
                <h2>No reports found</h2>
            {% endif %}
        </div>
    </section>
</body>
</html>